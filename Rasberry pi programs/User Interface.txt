import math
#import the tinker module
from Tkinter import *
import tkFont
import ttk
#import DB
import sys
import pymongo
from pymongo import MongoClient
import json

#create a new window
window =Tk()
#set window name
window.title("lab Inventory System")
#set window size
window.geometry("800x600")
#Set fond to helvetica
helv28 = tkFont.Font(family='Helvetica',size=28,weight='bold')
helv18 = tkFont.Font(family='Helvetica',size=18,weight='bold')
#Setup Connection to mongolabs
connection = MongoClient("ds054298.mongolab.com" ,54298)
db = connection ["rasppi"]

#Setup authentication for mongolabs
db.authenticate("admin","Azerty123")
print "Succesfully connected to mongodb"
#globale variabele
myvar = StringVar()

Type = StringVar()
Type.set("Type")

Value = StringVar()
Value.set("Value")

Quantity = StringVar()
Quantity.set("Quantity")

CheckOut= 0
#Functies

def FireonEnter(*ignore):
        print("Zoekbar")
        zoeken = db.posts.find({"Barcode":myvar.get()})
        for document in zoeken:
                Type.set(document['Type'])
                Value.set(document['Value'])
                Quantity.set(document['Quantity'])



def ReadZoekbar(*args):
        print "Barcode= ", myvar.get()

def callbackfunc(*args):
        print Type.get(),Value.get(),Quantity.get()

myvar.trace("w", ReadZoekbar)
Type.trace("w", callbackfunc)
#Declareren van layout
#textboxen
Zoekbar=Entry(window,font=helv28,textvariable=myvar)
Zoekbar.focus()
Zoekbar.bind('<Return>', FireonEnter)

#Label
lblType=Label(window, textvariable=Type,font=helv28)
lblValue=Label(window, textvariable=Value,font=helv28)
lblQuantity =Label(window, textvariable=Quantity,font=helv18)
lblCheckout =Label(window, text=CheckOut, font=helv28)
lbldebug= Label(window,textvariable=myvar)
#Buttons
btnUp = Button(window, text=">" , font=helv28)
btnDown=Button(window, text="<", font=helv28)

#GridLayout
#Gridrow=0
Zoekbar.grid(row=0,column=1, columnspan=4)
#Gridrow=1
lblType.grid(row=1,column=0,padx=5, pady=5)
lblValue.grid(row=1, column=1, padx=5, pady=5)
lblQuantity.grid(row=1,column=2, padx=5, pady=5)
btnDown.grid(row=1,column=3, padx=5, pady=5)
lblCheckout.grid(row=1,column=4, padx=5, pady=5)
btnUp.grid(row=1,column=5, padx=5, pady=5)
#gridrow=2
lbldebug.grid(row=2,column=1)
#draw the window, and start the app
window.mainloop()
